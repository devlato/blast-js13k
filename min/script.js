function H(){this.A=function(e){for(var f=0;24>f;f++)this[String.fromCharCode(97+f)]=e[f]||0;0.01>this.c&&(this.c=0.01);e=this.b+this.c+this.e;0.18>e&&(e=0.18/e,this.b*=e,this.c*=e,this.e*=e)}}var U=new function(){this.z=new H;var e,f,d,h,j,w,I,J,K,y,k,L;this.reset=function(){var b=this.z;h=100/(b.f*b.f+0.001);j=100/(b.g*b.g+0.001);w=1-0.01*b.h*b.h*b.h;I=1E-6*-b.i*b.i*b.i;b.a||(k=0.5-b.n/2,L=5E-5*-b.o);J=1+b.l*b.l*(0<b.l?-0.9:10);K=0;y=1==b.m?0:2E4*(1-b.m)*(1-b.m)+32};this.C=function(){this.reset();var b=this.z;e=1E5*b.b*b.b;f=1E5*b.c*b.c;d=1E5*b.e*b.e+12;return 3*((e+f+d)/3|0)};this.B=function(b,M){var a=this.z,N=1!=a.s||a.v,o=0.1*a.v*a.v,O=1+3E-4*a.w,l=0.1*a.s*a.s*a.s,V=1+1E-4*a.t,W=1!=a.s,X=a.x*a.x,Y=a.g,P=a.q||a.r,Z=0.2*a.r*a.r*a.r,B=a.q*a.q*(0>a.q?-1020:1020),Q=a.p?(2E4*(1-a.p)*(1-a.p)|0)+32:0,$=a.d,R=a.j/2,aa=0.01*a.k*a.k,C=a.a,D=e,ba=1/e,ca=1/f,da=1/d,a=5/(1+20*a.u*a.u)*(0.01+l);0.8<a&&(a=0.8);for(var a=1-a,E=!1,S=0,s=0,t=0,z=0,q=0,u,r=0,g,m=0,p,F=0,c,T=0,n,G=0,A=Array(1024),v=Array(32),i=A.length;i--;)A[i]=0;for(i=v.length;i--;)v[i]=2*Math.random()-1;for(i=0;i<M;i++){if(E)return i;Q&&++T>=Q&&(T=0,this.reset());y&&++K>=y&&(y=0,h*=J);w+=I;h*=w;h>j&&(h=j,0<Y&&(E=!0));g=h;0<R&&(G+=aa,g*=1+Math.sin(G)*R);g|=0;8>g&&(g=8);C||(k+=L,0>k?k=0:0.5<k&&(k=0.5));if(++s>D)switch(s=0,++S){case 1:D=f;break;case 2:D=d}switch(S){case 0:t=s*ba;break;case 1:t=1+2*(1-s*ca)*$;break;case 2:t=1-s*da;break;case 3:t=0,E=!0}P&&(B+=Z,p=B|0,0>p?p=-p:1023<p&&(p=1023));N&&O&&(o*=O,1E-5>o?o=1E-5:0.1<o&&(o=0.1));n=0;for(var ea=8;ea--;){m++;if(m>=g&&(m%=g,3==C))for(u=v.length;u--;)v[u]=2*Math.random()-1;switch(C){case 0:c=m/g<k?0.5:-0.5;break;case 1:c=1-2*(m/g);break;case 2:c=m/g;c=6.28318531*(0.5<c?c-1:c);c=1.27323954*c+0.405284735*c*c*(0>c?1:-1);c=0.225*((0>c?-1:1)*c*c-c)+c;break;case 3:c=v[Math.abs(32*m/g|0)]}N&&(u=r,l*=V,0>l?l=0:0.1<l&&(l=0.1),W?(q+=(c-r)*l,q*=a):(r=c,q=0),r+=q,z+=r-u,c=z*=1-o);P&&(A[F%1024]=c,c+=A[(F-p+1024)%1024],F++);n+=c}n*=0.125*t*X;b[i]=1<=n?32767:-1>=n?-32768:32767*n|0}return M}};window.jsfxr=function(e){U.z.A(e);var f=U.C(),e=new Uint8Array(4*((f+1)/2|0)+44),f=2*U.B(new Uint16Array(e.buffer,44),f),d=new Uint32Array(e.buffer,0,44);d[0]=1179011410;d[1]=f+36;d[2]=1163280727;d[3]=544501094;d[4]=16;d[5]=65537;d[6]=44100;d[7]=88200;d[8]=1048578;d[9]=1635017060;d[10]=f;for(var f=f+44,d=0,h="data:audio/wav;base64,",x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";d<f;d+=3)var j=e[d]<<16|e[d+1]<<8|e[d+2],h=h+(x[j>>18]+x[j>>12&63]+x[j>>6&63]+x[j&63]);return h};
function f(){this.l={}}function r(t){return t*(Math.random()-.5)}function s(t){return 0>t?-t:t}function B(i,a,e){var t=document.createElement("canvas");return t.width=i,t.height=a,e(t.getContext("2d"))}function C(t){document.getElementById(t).addEventListener("change",function(i){k[t]=i.target.checked},!1)}function I(t,i,a){this.p=Array(28900),this.a=t||12,this.t=900-this.a*this.a,this.k=[0,-Math.PI*(a||48)/180,-Math.PI*(i||24)/180],this.A()}function ea(a,e,t){var i,s;return i=Math.sqrt(a*a+e*e),i>76+t||i<Math.abs(76-t)?!1:(t=(5776-t*t+i*i)/(2*i),s=Math.sqrt(5776-t*t),[(a*t+e*s)/i,(e*t-a*s)/i])}function J(t,a,e,n){var s=Math.PI/3.5;t.beginPath();for(var i=0;7>i;++i)t.lineTo(16.5+(a+r(e))*Math.cos(s*i),16.5+(a+r(e))*Math.sin(s*i));t.fillStyle=n,t.fill()}function L(){var i,t;i=1-2*(.5>Math.random()),.4>Math.random()?(this.x=450*i,this.y=r(500)):(this.x=r(800),this.y=300*i),t=Math.sqrt(this.x*this.x+this.y*this.y),this.a=.75*t,t=Math.atan(-this.x/this.y)+Math.asin(.5*t/this.a)+(0>this.y)*Math.PI,this.i=this.x-this.a*Math.cos(t),this.j=this.y-this.a*Math.sin(t),(t=ea(this.i,this.j,this.a))?(this.r=t[0],this.s=t[1]):this.r=this.s=0,this.c=Math.atan2(this.y-this.j,this.x-this.i),this.o=Math.atan2(this.s-this.j,this.r-this.i),this.c<=this.o&&(this.c+=2*Math.PI),this.B=i=0|3*Math.random(),this.g=B(33,33,function(t){return J(t,14,4,n[i]),J(t,7,2,q[i]),t.canvas}),this.opacity=1}function M(){this.f=[],this.h=[]}function N(t,i,a){t.beginPath(),t.moveTo(-10*i,12*i),t.lineTo(0,-20*i),t.lineTo(10*i,12*i),t.lineTo(0,8*i),t.fillStyle=a,t.fill()}function O(){this.b=0,this.x=120,this.y=0,v.setLineDash([1,8]),v.strokeStyle=n[3],v.beginPath(),v.arc(0,0,120,0,2*Math.PI,!1),v.stroke(),this.g=B(40,40,function(t){return t.translate(20,24),N(t,1,n[3]),N(t,.5,q[3]),t.canvas})}function P(t){this.m=t,this.d=[],u.addEventListener("mousedown",this.v.bind(this),!1)}function Y(){if(W+=X=Date.now()-W,requestAnimationFrame(Y),k.rot){for(V-=X/24;0>V;)V+=320;Q.e(U.data,V),v.putImageData(U,365,G)}if(z){w.clearRect(-450.5,-300.5,900,600);var t,e,n,h,i,a,o=T.d.length,r=R.f.length;t=0;t:for(;o>t;++t)if(n=T.d[t],i=s(n[0]),a=s(n[1]),i>454||a>303)T.d.splice(t,1),--t,--o;else if(76>=i&&76>=a&&5776>=i*i+a*a)l.play("beep"),T.d.splice(t,1),--t,--o,--x;else for(e=0;r>e;++e)if(h=R.f[e],i=s(h.x-n[0]),a=s(h.y-n[1]),16>=i&&16>=a&&256>=i*i+a*a){l.play("kill"),T.d.splice(t,1),--t,--o,R.f.splice(e,1),R.h.push(h),--r,++y;continue t}R.e(X),S.e(X),T.e(X),aa.nodeValue=x,ba.nodeValue=y,x||(z=!1,Z&&clearTimeout(Z),w.fillStyle="rgba(0,0,0,0.6)",w.fillRect(-450,-273,900,160),w.fillStyle="#f44",w.fillText("Game Over",-.5*w.measureText("Game Over").width,-160),fa.firstChild.nodeValue="Play again",ga.className="")}}function ha(){if(z){var t=r(2);switch(!0){case t>.96:setTimeout($,800);case t>.69:setTimeout($,600);case t>0:setTimeout($,400);case t>-.69:setTimeout($,200)}$(),Z=setTimeout(ha,4e3+r(1e3))}}f.prototype.add=function(t,a,e){var i;this.l[t]=[],e.forEach(function(s,n){for(this.l[t].push({n:0,count:a,q:[]}),i=0;a>i;++i){var e=new Audio;e.src=jsfxr(s),this.l[t][n].q.push(e)}},this)},f.prototype.play=function(t){k.snd&&(t=this.l[t],t=1<t.length?t[0|Math.random()*t.length]:t[0],t.q[t.n].play(),t.n<t.count-1?t.n++:t.n=0)};var l=new f;l.add("pew",10,[[1,,.1864,.1993,.1924,.6194,.2,-.2589,,,,,,.637,-.1903,,,,1,,,,,.5]]),l.add("boom",5,[[3,,.2404,.3556,.329,.3114,,-.2614,,,,.4348,.6507,,,,-.0156,-.1146,1,,,,,.5]]),l.add("kill",5,[[0,,.2692,,.3768,.325,,.2316,,,,,,.1146,,.4716,,,1,,,,,.5]]),l.add("beep",5,[[1,,.1765,,.0034,.4107,,,,,,,,,,,,,1,,,.1,,.5]]);var n="#f441#3bf1#9c01#fb3".split(1),q="#c001#09c1#6901#f80".split(1),t=document.getElementById("L1"),u=document.getElementById("L2"),v=t.getContext("2d"),w=u.getContext("2d");v.translate(450.5,300.5),w.translate(450.5,300.5),w.font="96px Segoe UI,Helvetica Neue,sans-serif";var x=10,aa=document.getElementById("life").firstChild,y=0,ba=document.getElementById("score").firstChild,z=!1,k={mus:1,snd:1,rot:1};C("snd"),C("rot"),t.style.background='url("'+B(900,600,function(t){t.fillStyle="#101010",t.fillRect(0,0,900,600);var i,e,a;for(i=2;900>i;i+=5)for(e=2;600>e;e+=5)a=0|7*Math.random(),20<(a*=a*a)&&(t.fillStyle="rgb("+[a,a,a]+")",t.fillRect(i,e,1,1));for(t.fillStyle="#101010",t.arc(450,300,120,0,2*Math.PI,!1),t.fill(),t.globalAlpha=.25,i=1;10>i;++i)t.arc(450,300,120+10*i,0,2*Math.PI,!1),t.fill();return t.canvas.toDataURL()})+'") no-repeat';var ca=Audio,da=btoa,D,E="",F;for(F=0;524288>F;++F)E+=String.fromCharCode(128&F*"36364689"[7&(G=F>>12)]/12|127&((G^G-2)%11*F/4|G/2));D="RIFF_oO_WAVEfmt"+atob("IBAAAAABAAEARKwAAAAAAAABAAgAZGF0YU")+E+E;var H=new ca("data:audio/wav;base64,"+da(D));H.loop=!0,H.volume=.33,H.play(),document.getElementById("mus").addEventListener("change",function(t){t=t.target.checked,H[t?"play":"pause"](),t||(H.currentTime=0)},!1),~function(a,n){var e=30/170,i=[0,30,0],t=Array(3);a.u=function(h,o){i[0]=e*h-15,i[2]=e*o-15;var a=i[0]*i[0]+900+i[2]*i[2],s=324e4-4*a*this.t;if(0>=s)return null;a=(1800-Math.sqrt(s))/(2*a),t[0]=a*i[0],t[1]=a*i[1]-30,t[2]=a*i[2];var a=t[0],s=Math.cos(this.k[2]),n=Math.sin(this.k[2]);return t[0]=a*s-t[1]*n,t[1]=a*n+t[1]*s,a=t[2],s=Math.cos(this.k[1]),n=Math.sin(this.k[1]),t[2]=a*s-t[1]*n,t[1]=a*n+t[1]*s,[320*(Math.atan2(t[1],t[0])+Math.PI+1)/(2*Math.PI),320*Math.floor(319-320*Math.min(1,Math.acos(t[2]/this.a)/Math.PI))]},a.w=function(t){if(this.p[t]===n){var i=Math.floor(t/170);this.p[t]=this.u(t-170*i,i)}return this.p[t]},a.e=function(a,n){for(var t,i,e=this.g.data,s=28900;s--;)t=this.w(s),null!==t&&(t=4*((0|t[0]+n)%320+t[1]),i=4*s,a[i]=e[t],a[i+1]=e[t+1],a[i+2]=e[t+2],a[i+3]=255)},a.A=function(){var t=[1,1,1,1,1,1,1,1,1,1,1,.5,.1,.05,0,0,0];this.g=B(320,320,function(i){i.fillStyle="#ecf0f1",i.fillRect(0,0,320,320),i.fillStyle="#7f8c8d";var e,a;for(e=0;32>e;++e)for(a=0;32>a;++a)i.globalAlpha=Math.random()*t[s(a-16)],i.fillRect(10*e,10*a,10,10);return i.getImageData(0,0,320,320)})}}(I.prototype),L.prototype.update=function(t){return this.c-=t,this.c<=this.o?(--x,!0):(this.x=this.i+this.a*Math.cos(this.c),this.y=this.j+this.a*Math.sin(this.c),void 0)},M.prototype.add=function(){var t=new L;this.f.push(t)},M.prototype.e=function(e){var i,a,t,s;for(a=this.f.length,s=16e-5*e,w.setLineDash([4]),i=0;a>i;++i)(t=this.f[i]).update(s)?(l.play("boom"),this.f.splice(i,1),this.h.push(t),--i,--a):(w.beginPath(),w.arc(t.i,t.j,t.a,t.c,t.o,!0),w.strokeStyle=n[t.B],w.stroke(),w.drawImage(t.g,t.x-16.5,t.y-16.5));if(a=this.h.length){for(e*=.005,i=0;a>i;++i)t=this.h[i],0>=(t.opacity-=e)?(this.h.splice(i,1),--i,--a):(w.globalAlpha=t.opacity,w.drawImage(t.g,t.x-16.5,t.y-16.5));w.globalAlpha=1}},O.prototype.e=function(t){this.b-=.001*t,0>this.b&&(this.b+=2*Math.PI),this.x=120*Math.cos(this.b),this.y=120*Math.sin(this.b),w.save(),w.translate(this.x,this.y),w.rotate(this.b),w.drawImage(this.g,-20.5,-24.5),w.restore()},P.prototype.v=function(t){if(z){l.play("pew");var i=u.getBoundingClientRect(),a=t.clientX-450-(0|i.left)-this.m.x;t=t.clientY-300-(0|i.top)-this.m.y,i=Math.sqrt(a*a+t*t),this.d.push([this.m.x,this.m.y,a/i,t/i])}},P.prototype.e=function(i){var e,t,a;for(a=.25*i,e=this.d.length,w.beginPath(),w.fillStyle=n[3],i=0;e>i;++i)t=this.d[i],t[0]+=a*t[2],t[1]+=a*t[3],w.rect(t[0]-2.5,t[1]-2.5,5,5);w.fill()};var G=215,Q=new I,R=new M,S=new O,T=new P(S),U=v.createImageData(170,170);Q.e(U.data,0),v.putImageData(U,365,G);var V=320,W=Date.now(),X,$=R.add.bind(R),Z=0,ga=document.getElementById("xgo"),fa=document.getElementById("go");fa.addEventListener("click",function(){z||(l.play("beep"),x=10,y=S.b=0,R.f=[],T.d=[],z=!0,ga.className="h",setTimeout(ha,200))},!1),Y();