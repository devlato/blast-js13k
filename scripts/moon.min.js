function k(t,a,h){this.b=Array(28900),this.c=t||12,this.d=900-this.c*this.c,this.a=[0,-Math.PI*(h||48)/180,-Math.PI*(a||24)/180],this.g()}k.size=170,~function(h,n){var i=30/170,a=[0,30,0],t=Array(3);h.e=function(s,e){a[0]=i*s-15,a[2]=i*e-15;var h=a[0]*a[0]+900+a[2]*a[2],n=324e4-4*h*this.d;if(0>=n)return null;h=(1800-Math.sqrt(n))/(2*h),t[0]=h*a[0],t[1]=h*a[1]-30,t[2]=h*a[2];var h=t[0],n=Math.cos(this.a[2]),r=Math.sin(this.a[2]);return t[0]=h*n-t[1]*r,t[1]=h*r+t[1]*n,h=t[2],n=Math.cos(this.a[1]),r=Math.sin(this.a[1]),t[2]=h*n-t[1]*r,t[1]=h*r+t[1]*n,[320*(Math.atan2(t[1],t[0])+Math.PI+1)/(2*Math.PI),320*Math.floor(319-320*Math.min(1,Math.acos(t[2]/this.c)/Math.PI))]},h.f=function(t){if(this.b[t]===n){var a=Math.floor(t/170);this.b[t]=this.e(t-170*a,a)}return this.b[t]},h.render=function(h,r){for(var t,a,i=this.h.data,n=28900;n--;)t=this.f(n),null!==t&&(t=4*(Math.floor(t[0]+r)%320+t[1]),a=4*n,h[a]=i[t],h[a+1]=i[t+1],h[a+2]=i[t+2],h[a+3]=255)},h.g=function(){var t=document.createElement("canvas");t.height=t.width=320,t=t.getContext("2d"),t.fillStyle="#7f8c8d",t.fillRect(0,0,320,320),t.fillStyle="#ecf0f1";var a,h;for(a=0;32>a;++a)for(h=0;32>h;++h)a%2==h%2&&t.fillRect(10*a,10*h,10,10);this.h=t.getImageData(0,0,320,320)}}(k.prototype),window.Moon=k;