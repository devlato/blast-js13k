function k(f,h,g){this.b=Array(28900);this.c=f||12;this.d=900-this.c*this.c;this.a=[0,-Math.PI*(g||48)/180,-Math.PI*(h||24)/180];this.g()}
(function(f,h){var g=30/170,d=[0,30,0],a=Array(3);f.e=function(b,l){d[0]=g*b-15;d[2]=g*l-15;var c=d[0]*d[0]+900+d[2]*d[2],e=324E4-4*c*this.d;if(0>=e)return null;c=(1800-Math.sqrt(e))/(2*c);a[0]=c*d[0];a[1]=c*d[1]-30;a[2]=c*d[2];c=a[0];a[0]=c*Math.cos(this.a[2])-a[1]*Math.sin(this.a[2]);a[1]=c*Math.sin(this.a[2])+a[1]*Math.cos(this.a[2]);c=a[2];a[2]=c*Math.cos(this.a[1])-a[1]*Math.sin(this.a[1]);a[1]=c*Math.sin(this.a[1])+a[1]*Math.cos(this.a[1]);return[320*(Math.atan2(a[1],a[0])+Math.PI+1)/(2*Math.PI),
320*Math.floor(319-320*Math.min(1,Math.acos(a[2]/this.c)/Math.PI))]};f.f=function(b){if(this.b[b]===h){var a=Math.floor(b/170);this.b[b]=this.e(b-170*a,a)}return this.b[b]};f.render=function(b,a){for(var c=this.h.data,e,d,f=28900;f--;)e=this.f(f),null!==e&&(e=4*(Math.floor(e[0]+a)%320+e[1]),d=4*f,b[d]=c[e],b[d+1]=c[e+1],b[d+2]=c[e+2],b[d+3]=255)};f.g=function(){var b=document.createElement("canvas");b.height=b.width=320;b=b.getContext("2d");b.fillStyle="#7f8c8d";b.fillRect(0,0,320,320);b.fillStyle=
"#ecf0f1";var a,c;for(a=0;32>a;++a)for(c=0;32>c;++c)a%2==c%2&&b.fillRect(10*a,10*c,10,10);this.h=b.getImageData(0,0,320,320)}})(k.prototype);window.Moon=k;
