function k(t,a,h){this.b=Array(28900),this.c=t||12,this.d=900-this.c*this.c,this.a=[0,-Math.PI*(h||48)/180,-Math.PI*(a||24)/180],this.g()}k.size=170,~function(h,r){var i=30/170,a=[0,30,0],t=Array(3);h.e=function(s,o){a[0]=i*s-15,a[2]=i*o-15;var h=a[0]*a[0]+900+a[2]*a[2],r=324e4-4*h*this.d;if(0>=r)return null;h=(1800-Math.sqrt(r))/(2*h),t[0]=h*a[0],t[1]=h*a[1]-30,t[2]=h*a[2];var h=t[0],r=Math.cos(this.a[2]),n=Math.sin(this.a[2]);return t[0]=h*r-t[1]*n,t[1]=h*n+t[1]*r,h=t[2],r=Math.cos(this.a[1]),n=Math.sin(this.a[1]),t[2]=h*r-t[1]*n,t[1]=h*n+t[1]*r,[320*(Math.atan2(t[1],t[0])+Math.PI+1)/(2*Math.PI),320*Math.floor(319-320*Math.min(1,Math.acos(t[2]/this.c)/Math.PI))]},h.f=function(t){if(this.b[t]===r){var a=Math.floor(t/170);this.b[t]=this.e(t-170*a,a)}return this.b[t]},h.render=function(h,n){for(var t,a,i=this.h.data,r=28900;r--;)t=this.f(r),null!==t&&(t=4*((0|t[0]+n)%320+t[1]),a=4*r,h[a]=i[t],h[a+1]=i[t+1],h[a+2]=i[t+2],h[a+3]=255)},h.g=function(){var t=[1,1,1,1,1,1,1,1,1,1,1,.5,.1,.05,0,0,0];this.h=createCanvas(320,320,function(a){a.fillStyle="#ecf0f1",a.fillRect(0,0,320,320),a.fillStyle="#7f8c8d";var i,h;for(i=0;32>i;++i)for(h=0;32>h;++h)a.globalAlpha=Math.random()*t[abs(h-16)],a.fillRect(10*i,10*h,10,10);return a.getImageData(0,0,320,320)})}}(k.prototype),window.Moon=k;